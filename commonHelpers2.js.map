{"version":3,"file":"commonHelpers2.js","sources":["../src/js/filters.js","../src/js/popular.js"],"sourcesContent":["import axios from 'axios';\n\n\nexport class RequestToTheServer {\n    baseUrl = 'https://food-boutique.b.goit.study/api/'\n\n    constructor(endPoint){\n        this.endPoint = endPoint;\n    }\n\n    async fetchBreeds(){\n    try{\n        const response = await axios.get(`${this.baseUrl}${this.endPoint}`);\n        console.log(response.data);\n        return response.data\n    } catch(error){\n        console.error(\"Error:\", error.message);\n    }\n    }\n};\n\nconst searchForm = document.querySelector('.search-form');\nconst inputSearch = document.querySelector('.input-search');\nconst buttonSearch = document.querySelector('.button-search');\nconst filtersResult = document.querySelector('.filters-result');\nlet productsHomePage ={};\n\nconst messageForError = () => {\n    const htmlError = `<div class=\"error\">\n    <p class=\"title-error\">\n        Nothing was found for the selected <span><a class=\"a-title-error\" href=\"\">filters...</a></span>\n    </p>\n    <p class=\"p-error\">\n        Try adjusting your search parameters or browse our range by other criteria to find the perfect product for you.\n    </p>\n</div>`;\n    filtersResult.innerHTML = htmlError;\n}\n\nasync function ifEmptyInput() {\n    try {\n        const storageDataHomePage = localStorage.getItem('products-home-page-filters');\n        if (storageDataHomePage) {\n            productsHomePage = JSON.parse(storageDataHomePage);\n        } else {\n            const firstProductsFilters = \"products\";\n            const classFirstProducts = new RequestToTheServer(firstProductsFilters);\n            productsHomePage = await classFirstProducts.fetchBreeds();\n            localStorage.setItem('products-home-page-filters', JSON.stringify(productsHomePage));\n        }\n    } catch (error) {\n        console.error(\"Error:\", error.message);\n    }\n    console.log(productsHomePage);\n}\n\nifEmptyInput();\n\n\n\n\n\n\n\n\n\n\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    const textInputFilters = inputSearch.value.trim();\n    if(!textInputFilters){\n        ifEmptyInput();\n        filtersResult.innerHTML = '';\n    } else{\n        const valueFilters = `products?keyword=${textInputFilters}`;\n            const classResultProductsWithFilters = new RequestToTheServer(valueFilters);\n            productsHomePage = await classResultProductsWithFilters.fetchBreeds();\n            // localStorage.setItem('products-with-filters', JSON.stringify(productsHomePage));\n            if(productsHomePage.totalPages === 0){\n                messageForError();\n            }\n    }\n    console.log(productsHomePage.totalPages);\n})\n\n\n\n","import { RequestToTheServer } from './filters';\n\ndocument.addEventListener('DOMContentLoaded', async function () {\n  const request = new RequestToTheServer('products/popular?limit=5');\n\n  try {\n    //  отримати дані з локального сховища\n    const productsData = getProductsFromLocalStorage();\n\n    if (!productsData) {\n      // Якщо дані відсутні в локальному сховищі, отримуйте їх з сервера\n      const fetchedData = await request.fetchBreeds();\n\n      // Збереження  в локальному сховищі\n      saveProductsToLocalStorage(fetchedData);\n\n      // отримані дані для відображення продуктів\n      displayProducts(fetchedData);\n    } else {\n      // дані з локального сховища для відображення продуктів\n      displayProducts(productsData);\n    }\n  } catch (error) {\n    console.error('Error:', error);\n  }\n});\n\nfunction saveProductsToLocalStorage(products) {\n  //  Збереження продуктів в локальне сховище\n  localStorage.setItem('popularProducts', JSON.stringify(products));\n}\n\nfunction getProductsFromLocalStorage() {\n  //  Отримання  продуктів з локального сховища\n  const storedData = localStorage.getItem('popularProducts');\n  return storedData ? JSON.parse(storedData) : null;\n}\n\nfunction displayProducts(products) {\n  const productContainers = document.querySelectorAll('.product-template'); // Знайти всі блоки \"product-template\"\n\n  // Очистити вміст всіх блоків \"product-template\"\n  productContainers.forEach(container => {\n    container.style.display = 'none'; // Приховати блоки\n    container.querySelector('.product-image').src = '';\n    container.querySelector('.product-name').textContent = '';\n    container.querySelector('.category-value').textContent = '';\n    container.querySelector('.size-value').textContent = '';\n    container.querySelector('.popularity-value').textContent = '';\n  });\n\n  products.slice(0, productContainers.length).forEach((product, index) => {\n    const container = productContainers[index]; // Вибрати поточний блок\n    container.style.display = 'flex'; // Показати блок\n\n    // Заповнити дані блоку з даними з сервера\n    container.querySelector('.product-image').src = product.img;\n    container.querySelector('.product-name').textContent = product.name;\n    container.querySelector('.category-value').textContent =\n      product.category.replace('_', ' ');\n    container.querySelector('.size-value').textContent = product.size;\n    container.querySelector('.popularity-value').textContent =\n      product.popularity;\n\n    const addToCartBtn = container.querySelector('.add-to-cart-btn');\n    addToCartBtn.onclick = function () {\n      addToCart(product._id);\n    };\n  });\n}\n"],"names":["RequestToTheServer","endPoint","__publicField","response","axios","error","searchForm","inputSearch","filtersResult","productsHomePage","messageForError","htmlError","ifEmptyInput","storageDataHomePage","firstProductsFilters","event","textInputFilters","valueFilters","request","productsData","getProductsFromLocalStorage","displayProducts","fetchedData","saveProductsToLocalStorage","products","storedData","productContainers","container","product","index","addToCartBtn"],"mappings":"0PAGO,MAAMA,CAAmB,CAG5B,YAAYC,EAAS,CAFrBC,EAAA,eAAU,2CAGN,KAAK,SAAWD,CACnB,CAED,MAAM,aAAa,CACnB,GAAG,CACC,MAAME,EAAW,MAAMC,EAAM,IAAI,GAAG,KAAK,UAAU,KAAK,UAAU,EAClE,eAAQ,IAAID,EAAS,IAAI,EAClBA,EAAS,IACnB,OAAOE,EAAN,CACE,QAAQ,MAAM,SAAUA,EAAM,OAAO,CACxC,CACA,CACL,CAEA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,cAAc,eAAe,EACrC,SAAS,cAAc,gBAAgB,EAC5D,MAAMC,EAAgB,SAAS,cAAc,iBAAiB,EAC9D,IAAIC,EAAkB,CAAA,EAEtB,MAAMC,EAAkB,IAAM,CAC1B,MAAMC,EAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAQlBH,EAAc,UAAYG,CAC9B,EAEA,eAAeC,GAAe,CAC1B,GAAI,CACA,MAAMC,EAAsB,aAAa,QAAQ,4BAA4B,EAC7E,GAAIA,EACAJ,EAAmB,KAAK,MAAMI,CAAmB,MAC9C,CACH,MAAMC,EAAuB,WAE7BL,EAAmB,MADQ,IAAIT,EAAmBc,CAAoB,EAC1B,cAC5C,aAAa,QAAQ,6BAA8B,KAAK,UAAUL,CAAgB,CAAC,CACtF,CACJ,OAAQJ,EAAP,CACE,QAAQ,MAAM,SAAUA,EAAM,OAAO,CACxC,CACD,QAAQ,IAAII,CAAgB,CAChC,CAEAG,IAWAN,EAAW,iBAAiB,SAAU,MAAOS,GAAU,CACnDA,EAAM,eAAc,EACpB,MAAMC,EAAmBT,EAAY,MAAM,KAAI,EAC/C,GAAG,CAACS,EACAJ,IACAJ,EAAc,UAAY,OACxB,CACF,MAAMS,EAAe,oBAAoBD,IAErCP,EAAmB,MADoB,IAAIT,EAAmBiB,CAAY,EAClB,cAErDR,EAAiB,aAAe,GAC/BC,GAEX,CACD,QAAQ,IAAID,EAAiB,UAAU,CAC3C,CAAC,ECjFD,SAAS,iBAAiB,mBAAoB,gBAAkB,CAC9D,MAAMS,EAAU,IAAIlB,EAAmB,0BAA0B,EAEjE,GAAI,CAEF,MAAMmB,EAAeC,IAErB,GAAKD,EAWHE,EAAgBF,CAAY,MAXX,CAEjB,MAAMG,EAAc,MAAMJ,EAAQ,cAGlCK,EAA2BD,CAAW,EAGtCD,EAAgBC,CAAW,CACjC,CAIG,OAAQjB,EAAP,CACA,QAAQ,MAAM,SAAUA,CAAK,CAC9B,CACH,CAAC,EAED,SAASkB,EAA2BC,EAAU,CAE5C,aAAa,QAAQ,kBAAmB,KAAK,UAAUA,CAAQ,CAAC,CAClE,CAEA,SAASJ,GAA8B,CAErC,MAAMK,EAAa,aAAa,QAAQ,iBAAiB,EACzD,OAAOA,EAAa,KAAK,MAAMA,CAAU,EAAI,IAC/C,CAEA,SAASJ,EAAgBG,EAAU,CACjC,MAAME,EAAoB,SAAS,iBAAiB,mBAAmB,EAGvEA,EAAkB,QAAQC,GAAa,CACrCA,EAAU,MAAM,QAAU,OAC1BA,EAAU,cAAc,gBAAgB,EAAE,IAAM,GAChDA,EAAU,cAAc,eAAe,EAAE,YAAc,GACvDA,EAAU,cAAc,iBAAiB,EAAE,YAAc,GACzDA,EAAU,cAAc,aAAa,EAAE,YAAc,GACrDA,EAAU,cAAc,mBAAmB,EAAE,YAAc,EAC/D,CAAG,EAEDH,EAAS,MAAM,EAAGE,EAAkB,MAAM,EAAE,QAAQ,CAACE,EAASC,IAAU,CACtE,MAAMF,EAAYD,EAAkBG,GACpCF,EAAU,MAAM,QAAU,OAG1BA,EAAU,cAAc,gBAAgB,EAAE,IAAMC,EAAQ,IACxDD,EAAU,cAAc,eAAe,EAAE,YAAcC,EAAQ,KAC/DD,EAAU,cAAc,iBAAiB,EAAE,YACzCC,EAAQ,SAAS,QAAQ,IAAK,GAAG,EACnCD,EAAU,cAAc,aAAa,EAAE,YAAcC,EAAQ,KAC7DD,EAAU,cAAc,mBAAmB,EAAE,YAC3CC,EAAQ,WAEV,MAAME,EAAeH,EAAU,cAAc,kBAAkB,EAC/DG,EAAa,QAAU,UAAY,CACjC,UAAUF,EAAQ,GAAG,CAC3B,CACA,CAAG,CACH"}