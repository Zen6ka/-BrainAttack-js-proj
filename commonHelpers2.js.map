{"version":3,"file":"commonHelpers2.js","sources":["../src/js/filters.js","../src/js/popular.js","../src/js/modal.js"],"sourcesContent":["import axios, { all } from 'axios';\n\nexport class RequestToTheServer {\n    baseUrl = 'https://food-boutique.b.goit.study/api/'\n\n    constructor(endPoint, filters){\n        this.endPoint = endPoint;\n        this.filters = filters;\n    }\n\n    async fetchBreeds(){\n    try{\n        const response = await axios.get(`${this.baseUrl}${this.endPoint}?${this.filters}&limit=10`);\n        console.log(response.data);\n        return response.data\n    } catch(error){\n        console.error(\"Error:\", error.message);\n    }\n    }\n};\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nconst searchForm = document.querySelector('.search-form');\nconst inputSearch = document.querySelector('.first-input-search');\nconst filtersResult = document.querySelector('.filters-result');\nconst firctSelectSearch = document.querySelector('.first-select-search-not-focus');\nconst buttonCategories = document.querySelector('.button-categories');\nconst spanButtonCategories = document.querySelector('.span-button-categories');\n\n\nconst products = \"products\";\n\nlet filters = \"\";\nlet productsHomePage ={};\nlet inputResultSearch = {};\nlet productsCategories = {};\nlet nameCategory = '';\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nconst messageForError = () => {\n    const htmlError = `<div class=\"error\">\n    <p class=\"title-error\">\n        Nothing was found for the selected <span><a class=\"a-title-error\" href=\"\">filters...</a></span>\n    </p>\n    <p class=\"p-error\">\n        Try adjusting your search parameters or browse our range by other criteria to find the perfect product for you.\n    </p>\n</div>`;\n    filtersResult.innerHTML = htmlError;\n}\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n////////////////////////////////////////// HOME /// PAGE ////////////////////////////////////////////////////////////\nasync function ifEmptyInput() {\n    try {\n        const storageDataHomePage = localStorage.getItem('products-home-page-filters');\n        if (storageDataHomePage) {\n            productsHomePage = JSON.parse(storageDataHomePage);\n            // localStorage.removeItem('products-home-page-filters');\n        } else {\n            const classFirstProducts = new RequestToTheServer(products, filters);\n            const fullProductsHomePage = await classFirstProducts.fetchBreeds();\n            productsHomePage = fullProductsHomePage.results;\n            localStorage.setItem('products-home-page-filters', JSON.stringify(productsHomePage));\n        }\n    } catch (error) {\n        console.error(\"Error:\", error.message);\n    }\n    console.log(productsHomePage);\n}\n\nifEmptyInput();\n\n\n\n\n//////////////////////////////////////// INPUT ////////////////////////////////////////////////////////////////////\n\n\n\n\n\nsearchForm.addEventListener('submit', (event) => {\n    event.preventDefault();\n    const textInputFilters = inputSearch.value.trim();\n    const allValueInputLS = localStorage.getItem('all-value-input');\n    \n    functionInputSearch(textInputFilters, allValueInputLS, nameCategory)\n});\n\n\n\nasync function functionInputSearch(textInputFilters, allValueInputLS, nameCategory){\nlet resultSearch = localStorage.getItem('result-search-filters');\nif(!textInputFilters && nameCategory === ''){\n    ifEmptyInput();\n    filtersResult.innerHTML = '';\n} else if(allValueInputLS){\n        const allValueInput = JSON.parse(allValueInputLS);\n        allValueInput.push(textInputFilters)\n        const uniqueAllValueInput = allValueInput.filter(\n            (value, index, array) => array.indexOf(value) === index\n        );\n        localStorage.setItem('all-value-input', JSON.stringify(uniqueAllValueInput));\n        // localStorage.removeItem('all-value-input');\n        console.log(uniqueAllValueInput);\n        if(allValueInput.find(value => value === textInputFilters) && resultSearch){\n            const massOldResult = JSON.parse(resultSearch);\n            inputResultSearch = massOldResult.filter(\n                obj => obj.name.toLowerCase().includes(textInputFilters.toLowerCase())\n                ).filter(obj => obj.category === nameCategory);\n            if(Object.keys(inputResultSearch).length === 0){\n                await searchWithFilters(resultSearch, textInputFilters, nameCategory)\n            }\n            console.log(inputResultSearch);\n        } else {\n            searchWithFilters(resultSearch, textInputFilters, nameCategory)\n        }\n    } else {\n        console.log([textInputFilters]);\n        localStorage.setItem('all-value-input', JSON.stringify([textInputFilters]));\n        searchWithFilters(resultSearch, textInputFilters, nameCategory)\n}\n};\n\n\nasync function searchWithFilters(resultSearch, textInputFilters, nameCategory) {\n    filters = `keyword=${textInputFilters}&category=${nameCategory}`;\n        const classResultProductsWithFilters = new RequestToTheServer(products, filters);\n        const fullInputResultSearch = await classResultProductsWithFilters.fetchBreeds();\n        inputResultSearch = fullInputResultSearch.results;\n        console.log(inputResultSearch);\n        if(fullInputResultSearch.totalPages === 0){\n            messageForError();\n        } else {\n            if(resultSearch){\n                const resultNewResultSearch = JSON.parse(resultSearch);\n                const resultInputResultSearch = inputResultSearch;\n                resultInputResultSearch.forEach((resultObject) => {\n                    if(!resultNewResultSearch.find(newResult => newResult._id === resultObject._id)){\n                        resultNewResultSearch.push(resultObject);\n                    }\n                });\n                localStorage.setItem('result-search-filters', JSON.stringify(resultNewResultSearch));\n                // localStorage.removeItem('result-search-filters');\n                console.log(resultNewResultSearch);\n            } else {\n                console.log(inputResultSearch);\n                localStorage.setItem('result-search-filters', JSON.stringify(inputResultSearch));\n            };\n        }\n        console.log(inputResultSearch)\n}\n\n\n\n////////////////////////////////////////// ALL CATEGORIES ////////////////////////////////////////////////////////////////////\n\n\n\n\n\nasync function ifEmptyCategories() {\n    try {\n        const storageDataCategories = localStorage.getItem('categories-filters');\n        if (storageDataCategories) {\n            productsCategories = JSON.parse(storageDataCategories);\n            // localStorage.removeItem('categories-filters');\n        } else {\n            const firstProductsCategoriesFilters = `${products}/categories`;\n            const classFirstCategoriesProducts = new RequestToTheServer(firstProductsCategoriesFilters, filters);\n            productsCategories = await classFirstCategoriesProducts.fetchBreeds();\n            localStorage.setItem('categories-filters', JSON.stringify(productsCategories));\n        }\n    } catch (error) {\n        console.error(\"Error:\", error.message);\n    }\n    renderCategories(productsCategories);\n}\n\nifEmptyCategories();\n\nfunction renderCategories(productsCategories){\n    const listCategories = [];\n    productsCategories.forEach((productsCategorie) => {\n        const itemCategories = `<li class=\"li-first-select-search\"><button class=\"button-li-filters\">${productsCategorie.replace(/_/g, ' ').replace(/&/g, '/')}</button></li>`;\n        listCategories.push(itemCategories)\n    });\n    firctSelectSearch.insertAdjacentHTML('beforeend', listCategories.join(''));\n    const buttonsLiFilters = document.querySelectorAll('.button-li-filters');\n    addListenerLi(buttonsLiFilters)\n}\n\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n\nbuttonCategories.addEventListener('click', () => addListenerButton(buttonCategories, firctSelectSearch));\n\n\nfunction addListenerButton(button, buttonList) {\n    buttonList.classList.add('first-select-search');\n    document.addEventListener('click', (event) => workButtonMenu(event, button, buttonList));\n};\n\nfunction workButtonMenu(event, button, listButtonMenu) {\n    if(!button.contains(event.target)&&!listButtonMenu.contains(event.target)){\n        listButtonMenu.classList.remove('first-select-search')\n    } else if(listButtonMenu.contains(event.target)){\n        setTimeout(() => {\n            listButtonMenu.classList.remove('first-select-search')\n        }, 100)\n    }\n};\n\nfunction addListenerLi(buttonsLiFilters){\n    buttonsLiFilters.forEach((buttonLiFilters) => {\n    buttonLiFilters.addEventListener('click', renderEndPoint)\n})\n};\n\nfunction renderEndPoint(event){\n    const nameCategoryForSelect = event.currentTarget.textContent;\n    nameCategory = nameCategoryForSelect.replace(/ /g, '_').replace(/\\//g, '&');\n    spanButtonCategories.innerHTML = `${nameCategoryForSelect}`;\n}\n\n// localStorage.clear()\n\n\n\n\n\n\n\n\n\n\n// const productsFromTheLS = JSON.parse(localStorage.getItem('products-home-page-filters')).results;\n// resultSearch = localStorage.getItem('result-search-filters');\n//             const resultSearchFromTheLS = JSON.parse(resultSearch);\n//             resultSearchFromTheLS.forEach((resultObject) => {\n//                 if(!productsFromTheLS.find(newResult => newResult._id === resultObject._id)){\n//                     productsFromTheLS.push(resultObject);\n//                 }\n//             });","import { RequestToTheServer } from './filters';\n\ndocument.addEventListener('DOMContentLoaded', async function () {\n  const request = new RequestToTheServer('products/popular?limit=5');\n\n  try {\n    //  отримати дані з локального сховища\n    const productsData = getProductsFromLocalStorage();\n\n    if (!productsData) {\n      // Якщо дані відсутні в локальному сховищі, отримуйте їх з сервера\n      const fetchedData = await request.fetchBreeds();\n\n      // Збереження  в локальному сховищі\n      saveProductsToLocalStorage(fetchedData);\n\n      // отримані дані для відображення продуктів\n      displayProducts(fetchedData);\n    } else {\n      // дані з локального сховища для відображення продуктів\n      displayProducts(productsData);\n    }\n  } catch (error) {\n    console.error('Error:', error);\n  }\n});\n\nfunction saveProductsToLocalStorage(products) {\n  //  Збереження продуктів в локальне сховище\n  localStorage.setItem('popularProducts', JSON.stringify(products));\n}\n\nfunction getProductsFromLocalStorage() {\n  //  Отримання  продуктів з локального сховища\n  const storedData = localStorage.getItem('popularProducts');\n  return storedData ? JSON.parse(storedData) : null;\n}\n\nfunction displayProducts(products) {\n  const productContainers = document.querySelectorAll('.product-template'); // Знайти всі блоки \"product-template\"\n\n  // Очистити вміст всіх блоків \"product-template\"\n  productContainers.forEach(container => {\n    container.style.display = 'none'; // Приховати блоки\n    container.querySelector('.product-image').src = '';\n    container.querySelector('.product-name').textContent = '';\n    container.querySelector('.category-value').textContent = '';\n    container.querySelector('.size-value').textContent = '';\n    container.querySelector('.popularity-value').textContent = '';\n  });\n\n  products.slice(0, productContainers.length).forEach((product, index) => {\n    const container = productContainers[index]; // Вибрати поточний блок\n    container.style.display = 'flex'; // Показати блок\n\n    // Заповнити дані блоку з даними з сервера\n    container.querySelector('.product-image').src = product.img;\n    container.querySelector('.product-name').textContent = product.name;\n    container.querySelector('.category-value').textContent =\n      product.category.replace('_', ' ');\n    container.querySelector('.size-value').textContent = product.size;\n    container.querySelector('.popularity-value').textContent =\n      product.popularity;\n    const productInfo = {\n      productId: product._id,\n      productName: product.name,\n      productImg: product.img,\n      productCategory: product.category,\n      productPrice: product.price,\n      productSize: product.size,\n      productIs10PercentOff: product.is10PercentOff,\n      productPopularity: product.popularity,\n    };\n    const addToCartBtn = container.querySelector('.add-to-cart-btn');\n    addToCartBtn.onclick = function () {\n      addToCart(productInfo);\n    };\n  });\n}\n\n// Функція для додавання продукту в кошик\nfunction addToCart(product) {\n  // Отримуємо дані про кошик з локального сховища\n  const cart = JSON.parse(localStorage.getItem('cart')) || {};\n\n  // Перевіряємо, чи товар вже є в кошику за його ідентифікатором\n  if (!cart[product.productId]) {\n    // Якщо товару немає в кошику, додаємо його\n    cart[product.productId] = product;\n    localStorage.setItem('cart', JSON.stringify(cart));\n  }\n\n  // Повертаємо об'єкт продукту, який був доданий до кошика\n  return product;\n}\n\nconst productId = '';\nconst addToCartBtn = document.querySelector(\n  `button[data-product-id=\"${productId}\"]`\n);\nif (addToCartBtn) {\n  addToCartBtn.addEventListener('click', () => {\n    addToCart(productId);\n  });\n}\n","import axios from 'axios';\n\nconst refs = {\n  openModalBtn: document.querySelector('[data-action=\"open-modal\"]'),\n  closeModalBtn: document.querySelector('[data-action=\"close-modal\"]'),\n  backdrop: document.querySelector('.js-backdrop'),\n  addToCart: document.querySelector('.modal-btn-sabmit'),\n  discountProduct: document.querySelector('.modal-discount-svg'),\n  onCart: document.querySelector('.modal-btn-sabmit-span'),\n  modalImg: document.querySelector('.modal-img img'),\n  modalTitle: document.querySelector('.modal-title'),\n  modalCategory: document.querySelector(\n    '.modal-list li:nth-child(1) .modal-item-span'\n  ),\n  modalSize: document.querySelector(\n    '.modal-list li:nth-child(2) .modal-item-span'\n  ),\n  modalPopularity: document.querySelector(\n    '.modal-list li:nth-child(3) .modal-item-span'\n  ),\n  modalDesc: document.querySelector('.modal-info-taxt'),\n  modalPrice: document.querySelector('.modal-price'),\n};\n\n// Слухачі\nrefs.openModalBtn.addEventListener('click', onOpenModal);\nrefs.closeModalBtn.addEventListener('click', onCloseModal);\nrefs.backdrop.addEventListener('click', onBackdropClick);\n\n// Зовнішній URL для запитів\nconst baseUrl = 'https://food-boutique.b.goit.study/api/';\n\n// Оновлюємо інтерфейс модального вікна при відкритті\nasync function onOpenModal() {\n  const productId = this.dataset.productId;\n  await handleProductDetails(productId);\n  // Додаємо слухач\n  window.addEventListener('keydown', onCloseByEsc);\n  document.body.classList.add('show-modal');\n\n  // Перевіряємо, чи продукт вже в корзині\n  checkIfProductInCart(productId);\n}\n\n// Запит за допомогою Axios\nasync function fetchProductById(productId) {\n  try {\n    const response = await axios.get(`${baseUrl}products/${productId}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error:', error.message);\n    return null;\n  }\n}\n\n// Відмальовка в модалку\nasync function handleProductDetails(productId) {\n  const productDetails = await fetchProductById(productId);\n\n  if (productDetails) {\n    refs.modalImg.src = productDetails.img;\n    refs.modalImg.alt = productDetails.name;\n    refs.modalTitle.textContent = productDetails.name;\n    refs.modalCategory.textContent = productDetails.category;\n    refs.modalSize.textContent = productDetails.size;\n    refs.modalPopularity.textContent = productDetails.popularity;\n    refs.modalDesc.textContent = productDetails.desc;\n    refs.modalPrice.textContent = `$${productDetails.price.toFixed(2)}`;\n\n    // Перевіряємо чи продукт в корзині\n    checkIfProductInCart(productId);\n  }\n}\n\n// Міняю текст кнопки в залежності чи в корзині продукт\nfunction updateAddToCartButton(isInCart) {\n  const buttonText = isInCart ? 'Remove from' : 'Add to';\n  refs.addToCart.querySelector('.modal-btn-sabmit-span').textContent =\n    buttonText;\n  refs.addToCart.disabled = isInCart; // кнопка не активна якщо товар в корзині\n}\n\n// Перевіряєм чи продукт вже в корзині\nfunction checkIfProductInCart(productId) {\n  let cart = getCartFromStorage();\n  const isInCart = cart.includes(productId);\n\n  // Оновлюю текст\n  updateAddToCartButton(isInCart);\n\n  // Додавання слухача для кнопки\n  refs.addToCart.addEventListener('click', () => {\n    if (isInCart) {\n      // Видалення товару з корзини\n      removeFromCart(productId);\n      // Оновлюємо текст кнопки та робимо її неактивною\n      updateAddToCartButton(false);\n      refs.addToCart.removeEventListener('click', null); // Видаляємо слухача\n    } else {\n      // Товару немає в кошику, додаємо\n      addToCart(productId);\n      // Оновлюємо текст кнопки\n      updateAddToCartButton(true);\n    }\n  });\n}\n\n// Функція для отримання корзини з локального сховища\nfunction getCartFromStorage() {\n  const cart = JSON.parse(localStorage.getItem('cart')) || [];\n  return cart;\n}\n// Функція для додавання продукту до корзини в локальному сховищі\nfunction addToCart(productId) {\n  let cart = getCartFromStorage();\n  if (!cart.includes(productId)) {\n    cart.push(productId);\n    localStorage.setItem('cart', JSON.stringify(cart));\n  }\n}\n\n// Функція для видалення продукту з корзини в локальному сховищі\nfunction removeFromCart(productId) {\n  let cart = getCartFromStorage();\n  const index = cart.indexOf(productId);\n  if (index !== -1) {\n    cart.splice(index, 1);\n    localStorage.setItem('cart', JSON.stringify(cart));\n  }\n}\n\n// Закритя модального вікна\nfunction onCloseModal() {\n  // Зняв слухач\n  window.removeEventListener('keydown', onCloseByEsc);\n  document.body.classList.remove('show-modal');\n}\n\n// Закритя модального вікна по кліку за модалку (на темний фон)\nfunction onBackdropClick(event) {\n  if (event.currentTarget === event.target) {\n    onCloseModal();\n  }\n}\n\n// Закритя модального вікна по Esc\nfunction onCloseByEsc(event) {\n  if (event.code === 'Escape') {\n    onCloseModal();\n  }\n}\n"],"names":["RequestToTheServer","endPoint","filters","__publicField","response","axios","error","searchForm","inputSearch","filtersResult","firctSelectSearch","buttonCategories","spanButtonCategories","products","productsHomePage","inputResultSearch","productsCategories","nameCategory","messageForError","htmlError","ifEmptyInput","storageDataHomePage","event","textInputFilters","allValueInputLS","functionInputSearch","resultSearch","allValueInput","uniqueAllValueInput","value","index","array","obj","searchWithFilters","fullInputResultSearch","resultNewResultSearch","resultObject","newResult","ifEmptyCategories","storageDataCategories","firstProductsCategoriesFilters","renderCategories","listCategories","productsCategorie","itemCategories","buttonsLiFilters","addListenerLi","addListenerButton","button","buttonList","workButtonMenu","listButtonMenu","buttonLiFilters","renderEndPoint","nameCategoryForSelect","request","productsData","getProductsFromLocalStorage","displayProducts","fetchedData","saveProductsToLocalStorage","storedData","productContainers","container","product","productInfo","addToCartBtn","addToCart","cart","productId","refs","onOpenModal","onCloseModal","onBackdropClick","baseUrl","handleProductDetails","onCloseByEsc","checkIfProductInCart","fetchProductById","productDetails","updateAddToCartButton","isInCart","buttonText","getCartFromStorage","removeFromCart"],"mappings":"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"}