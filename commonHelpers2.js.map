{"version":3,"file":"commonHelpers2.js","sources":["../src/js/filters.js","../src/js/popular.js"],"sourcesContent":["import axios from 'axios';\n\n\nexport class RequestToTheServer {\n    baseUrl = 'https://food-boutique.b.goit.study/api/'\n\n    constructor(endPoint){\n        this.endPoint = endPoint;\n    }\n\n    async fetchBreeds(){\n    try{\n        const response = await axios.get(`${this.baseUrl}${this.endPoint}`);\n        console.log(response.data);\n        return response.data\n    } catch(error){\n        console.error(\"Error:\", error.message);\n    }\n    }\n};\n\nconst searchForm = document.querySelector('.search-form');\nconst inputSearch = document.querySelector('.input-search');\nconst buttonSearch = document.querySelector('.button-search');\nconst filtersResult = document.querySelector('.filters-result');\nlet productsHomePage ={};\n\nconst messageForError = () => {\n    const htmlError = `<div class=\"error\">\n    <p class=\"title-error\">\n        Nothing was found for the selected <span><a class=\"a-title-error\" href=\"\">filters...</a></span>\n    </p>\n    <p class=\"p-error\">\n        Try adjusting your search parameters or browse our range by other criteria to find the perfect product for you.\n    </p>\n</div>`;\n    filtersResult.innerHTML = htmlError;\n}\n\nasync function ifEmptyInput() {\n    try {\n        const storageDataHomePage = localStorage.getItem('products-home-page-filters');\n        if (storageDataHomePage) {\n            productsHomePage = JSON.parse(storageDataHomePage);\n        } else {\n            const firstProductsFilters = \"products\";\n            const classFirstProducts = new RequestToTheServer(firstProductsFilters);\n            productsHomePage = await classFirstProducts.fetchBreeds();\n            localStorage.setItem('products-home-page-filters', JSON.stringify(productsHomePage));\n        }\n    } catch (error) {\n        console.error(\"Error:\", error.message);\n    }\n    console.log(productsHomePage);\n}\n\nifEmptyInput();\n\n\n\n\n\n\n\n\n\n\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    const textInputFilters = inputSearch.value.trim();\n    if(!textInputFilters){\n        ifEmptyInput();\n        filtersResult.innerHTML = '';\n    } else{\n        const valueFilters = `products?keyword=${textInputFilters}`;\n            const classResultProductsWithFilters = new RequestToTheServer(valueFilters);\n            productsHomePage = await classResultProductsWithFilters.fetchBreeds();\n            // localStorage.setItem('products-with-filters', JSON.stringify(productsHomePage));\n            if(productsHomePage.totalPages === 0){\n                messageForError();\n            }\n    }\n    console.log(productsHomePage.totalPages);\n})\n\n\n\n","import { RequestToTheServer } from './filters';\n\ndocument.addEventListener('DOMContentLoaded', async function () {\n  const request = new RequestToTheServer('products/popular?limit=5');\n\n  try {\n    // Спробуйте отримати дані з локального сховища\n    const productsData = getProductsFromLocalStorage();\n\n    if (!productsData) {\n      // Якщо дані відсутні в локальному сховищі, отримуйте їх з сервера\n      const fetchedData = await request.fetchBreeds();\n\n      // Збережіть отримані дані в локальному сховищі\n      saveProductsToLocalStorage(fetchedData);\n\n      // Використовуйте отримані дані для відображення продуктів\n      displayProducts(fetchedData);\n    } else {\n      // Використовуйте дані з локального сховища для відображення продуктів\n      displayProducts(productsData);\n    }\n  } catch (error) {\n    console.error('Error:', error);\n  }\n});\n\n// Змінена функція для відображення популярних продуктів\nasync function displayProducts(products) {\n  const productsContainer = document.querySelector('.products-container');\n  const template = document.querySelector('.product-template');\n\n  products.forEach(product => {\n    const productClone = template.cloneNode(true);\n    productClone.style.display = 'flex';\n    productClone.querySelector('.product-image').src = product.img;\n    productClone.querySelector('.product-name').textContent = product.name;\n\n    // Заповнюємо дані з сервера в спани\n    productClone.querySelector('.category-value').textContent =\n      product.category.replace('_', ' ');\n    productClone.querySelector('.size-value').textContent = product.size;\n    productClone.querySelector('.popularity-value').textContent =\n      product.popularity;\n\n    const addToCartBtn = productClone.querySelector('.add-to-cart-btn');\n    addToCartBtn.onclick = function () {\n      addToCart(product._id);\n    };\n\n    productsContainer.appendChild(productClone);\n  });\n}\n\n// Функція збереження продуктів в локальному сховищі\nfunction saveProductsToLocalStorage(products) {\n  localStorage.setItem('popularProducts', JSON.stringify(products));\n}\n\n// Функція отримання продуктів з локального сховища\nfunction getProductsFromLocalStorage() {\n  const storedData = localStorage.getItem('popularProducts');\n  return storedData ? JSON.parse(storedData) : null;\n}\n\n// Змінена функція для додавання продукту в кошик\nfunction addToCart(productId) {\n  console.log('Додавання продукту в кошик:', productId);\n  // Тут буде функціонал для додавання продукту в кошик\n}\n"],"names":["RequestToTheServer","endPoint","__publicField","response","axios","error","searchForm","inputSearch","filtersResult","productsHomePage","messageForError","htmlError","ifEmptyInput","storageDataHomePage","firstProductsFilters","event","textInputFilters","valueFilters","request","productsData","getProductsFromLocalStorage","displayProducts","fetchedData","saveProductsToLocalStorage","products","productsContainer","template","product","productClone","addToCartBtn","addToCart","storedData","productId"],"mappings":"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"}